# 가동율 개발 방법 (Binary Run Rate)
## 가동율 이란
* 일정 단위 기간동안 부하가 동작했는지 안했는지를 확인하는 지표
* 1일단위인 경우, 1일동안 1회라도 전원이 On 되어 있는지 확인
  * 현재 LTE 전력량계는 15분 단위로 동작하고 있음
  * 15분 단위로 가동 여부를 확인함

## Binary Run Rate
* 단위 시간동안 1회라도 LTE 전력량계 데이터가 수신되면, 해당 시간의 값을 1로
 표시하는 Binary Run Count 메트릭을 생성함
* 단위 시간 동안 데이터가 수집되지 않은 경우와 측정값이 0~0.1 정도로 매우 낮은
  경우는 Turn-Off 되어 있는것으로 판단하여 BRC는 값이 없는것으로 함

```
Turn-Off 와 미전송된 상태의 BRC를 비워둘 것인지, 0으로 할것인지는 지속적으로 검토 필요함 
```

## 작업 절차
1. outlier 제거된 Tag가 붙은 메트릭을 준비 (in Metric)
2. in Metric 을 입력하면서, 데이터포인트에 데이터가 있으면 1로 표시, 0이거나
   없으면 데이터 입력하지 않고 skip 하면서 out Metric 으로 저장
3. out Metric을 저장 (예, rc05_BRR_15min)

## 고민사항
* 가동율이 15분 단위로 메트릭이 생성되면, 15분 단위의 Binary Run Count는
  존재하지만, 원하는 기간동안의 가동율을 구하기 위해서는 해당 기간의 총 데이터
  point 수와 BRC 1이 존재하는 구간동안의 통계를 따로 계산해 주어야 함
* 더구나, 400개 LTE 전력량계의 종합, 통계 가동율을 구하기 위해서는
  * 사용자가 요청한 기간의 총 단위시간 point 수를 세고
  * 해당 구간에서 BRC 의 갯수를 세어서
  * 모든 LTE 전력량계에 대해 (BRC 갯수 / 총 point 수)를 계산해야 함
  * 이경우, 총 가동율은 결국 아래 세가지 항목을 구해야 함
    * 대상 LTE 전력량계 의 총 갯수
    * 대상 단위시간 구간 의 총 갯수
    * 대상 LTE 전력량계 의 BRC 총 갯수 
  * 이것에 해당하는 API를 구현해야 함

